# Autogenerated by build.py - do not edit
namespace = clawmachine

country_event = {
	id = clawmachine.1
	title = clawmachine.1.t
	desc = clawmachine.1.d
	picture = event_test
	is_triggered_only = yes
	immediate = {
		# Metaprogramming in EU4 is extremely limited. We can't set a string variable and then
		# say "add country modifier with this name", so we have a bunch of individual flags,
		# and have a corresponding switch block in the selection. The important thing is: the
		# randomness occurs here in the immediate block, allowing the player to make a decision
		# and be guaranteed to get the exact effect listed.
		hidden_effect = {
			random_list = { # sword
				1 = { set_country_flag = clawmachine_fort_maintenance_modifier }
			}
			random_list = { # coin
				1 = { set_country_flag = clawmachine_merchants }
				1 = { set_country_flag = clawmachine_placed_merchant_power }
				1 = { set_country_flag = clawmachine_ship_power_propagation }
				1 = { set_country_flag = clawmachine_caravan_power }
				1 = { set_country_flag = clawmachine_center_of_trade_upgrade_cost }
				1 = { set_country_flag = clawmachine_great_project_upgrade_cost }
				1 = { set_country_flag = clawmachine_inflation_action_cost }
				1 = { set_country_flag = clawmachine_buildings }
				1 = { set_country_flag = clawmachine_global_prosperity_growth }
			}
			random_list = { # heart
				1 = { set_country_flag = clawmachine_tolerance }
				1 = { set_country_flag = clawmachine_all_estate_loyalty_equilibrium }
			}
			random_list = { # globe
				1 = { set_country_flag = clawmachine_range }
				1 = { set_country_flag = clawmachine_institution_growth }
			}
		}
	}
	option = {
		name = clawmachine.1.sword
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_fort_maintenance_modifier = { add_country_modifier = { name = clawmachine_fort_maintenance_modifier duration = -1 } } #g
		}
	}
	option = {
		name = clawmachine.1.coin
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_merchants = { add_country_modifier = { name = clawmachine_merchants duration = -1 } } #g
			clawmachine_placed_merchant_power = { add_country_modifier = { name = clawmachine_placed_merchant_power duration = -1 } } #g
			clawmachine_ship_power_propagation = { add_country_modifier = { name = clawmachine_ship_power_propagation duration = -1 } } #g
			clawmachine_caravan_power = { add_country_modifier = { name = clawmachine_caravan_power duration = -1 } } #g
			clawmachine_center_of_trade_upgrade_cost = { add_country_modifier = { name = clawmachine_center_of_trade_upgrade_cost duration = -1 } } #g
			clawmachine_great_project_upgrade_cost = { add_country_modifier = { name = clawmachine_great_project_upgrade_cost duration = -1 } } #g
			clawmachine_inflation_action_cost = { add_country_modifier = { name = clawmachine_inflation_action_cost duration = -1 } } #g
			clawmachine_buildings = { add_country_modifier = { name = clawmachine_buildings duration = -1 } } #g
			clawmachine_global_prosperity_growth = { add_country_modifier = { name = clawmachine_global_prosperity_growth duration = -1 } } #g
		}
	}
	option = {
		name = clawmachine.1.heart
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_tolerance = { add_country_modifier = { name = clawmachine_tolerance duration = -1 } } #g
			clawmachine_all_estate_loyalty_equilibrium = { add_country_modifier = { name = clawmachine_all_estate_loyalty_equilibrium duration = -1 } } #g
		}
	}
	option = {
		name = clawmachine.1.globe
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_range = { add_country_modifier = { name = clawmachine_range duration = -1 } } #g
			clawmachine_institution_growth = { capital_scope = { add_permanent_province_modifier = { name = clawmachine_institution_growth duration = -1 } } } #l
		}
	}
	option = {
		name = clawmachine.1.abort
		add_prestige = -10
		hidden_effect = {
			country_event = {
				id = clawmachine.2
				days = 1 # FIXME: 30 when not testing
			}
		}
		custom_tooltip = "clawmachine.1.abortdesc"
		ai_chance = { factor = 100 }
	}
	after = {
		clr_country_flag = clawmachine_fort_maintenance_modifier

		clr_country_flag = clawmachine_merchants
		clr_country_flag = clawmachine_placed_merchant_power
		clr_country_flag = clawmachine_ship_power_propagation
		clr_country_flag = clawmachine_caravan_power
		clr_country_flag = clawmachine_center_of_trade_upgrade_cost
		clr_country_flag = clawmachine_great_project_upgrade_cost
		clr_country_flag = clawmachine_inflation_action_cost
		clr_country_flag = clawmachine_buildings
		clr_country_flag = clawmachine_global_prosperity_growth

		clr_country_flag = clawmachine_tolerance
		clr_country_flag = clawmachine_all_estate_loyalty_equilibrium

		clr_country_flag = clawmachine_range
		clr_country_flag = clawmachine_institution_growth
	}
}

# Delayed event to reenable the decision. This discourages frivolous rerolling, while still
# permitting it if none of the options suit the country in question.
country_event = {
	id = clawmachine.2
	title = clawmachine.1.t # Irrelevant since it's hidden
	desc = clawmachine.1.d
	picture = event_test
	is_triggered_only = yes
	hidden = yes
	immediate = {
		hidden_effect = {
			clr_country_flag = claw_machine_used
		}
	}
	option = { name = clawmachine.1.abort }
}

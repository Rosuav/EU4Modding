# Autogenerated by build.py - do not edit
namespace = clawmachine

country_event = {
	id = clawmachine.1
	title = clawmachine.1.t
	desc = clawmachine.1.d
	picture = event_test
	is_triggered_only = yes
	immediate = {
		# Metaprogramming in EU4 is extremely limited. We can't set a string variable and then
		# say "add country modifier with this name", so we have a bunch of individual flags,
		# and have a corresponding switch block in the selection. The important thing is: the
		# randomness occurs here in the immediate block, allowing the player to make a decision
		# and be guaranteed to get the exact effect listed.
		hidden_effect = {
			random_list = { # sword
				1 = { set_country_flag = clawmachine_fort_maintenance_modifier }
			}
			random_list = { # coin
				1 = { set_country_flag = clawmachine_placed_merchant_power }
			}
			random_list = { # heart
				1 = { set_country_flag = clawmachine_tolerance }
			}
			random_list = { # globe
				1 = { set_country_flag = clawmachine_institution_growth }
			}
		}
	}
	option = {
		name = clawmachine.1.sword
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_fort_maintenance_modifier = { add_country_modifier = { name = clawmachine_fort_maintenance_modifier duration = -1 } } #?
		}
	}
	option = {
		name = clawmachine.1.coin
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_placed_merchant_power = { add_country_modifier = { name = clawmachine_placed_merchant_power duration = -1 } } #?
		}
	}
	option = {
		name = clawmachine.1.heart
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_tolerance = { add_country_modifier = { name = clawmachine_tolerance duration = -1 } } #?
		}
	}
	option = {
		name = clawmachine.1.globe
		trigger_switch = {
			on_trigger = has_country_flag
			clawmachine_institution_growth = { capital_scope = { add_permanent_province_modifier = { name = clawmachine_institution_growth duration = -1 } } } #!
		}
	}
	option = {
		name = clawmachine.1.abort
		add_prestige = -10
		hidden_effect = {
			country_event = {
				id = clawmachine.2
				days = 30
			}
		}
		custom_tooltip = "clawmachine.1.abortdesc"
		ai_chance = { factor = 100 }
	}
	after = {
		clr_country_flag = clawmachine_fort_maintenance_modifier

		clr_country_flag = clawmachine_placed_merchant_power

		clr_country_flag = clawmachine_tolerance

		clr_country_flag = clawmachine_institution_growth
	}
}

# Delayed event to reenable the decision. This discourages frivolous rerolling, while still
# permitting it if none of the options suit the country in question.
country_event = {
	id = clawmachine.2
	title = clawmachine.1.t # Irrelevant since it's hidden
	desc = clawmachine.1.d
	picture = event_test
	is_triggered_only = yes
	hidden = yes
	immediate = {
		hidden_effect = {
			clr_country_flag = claw_machine_used
		}
	}
	option = { name = clawmachine.1.abort }
}
